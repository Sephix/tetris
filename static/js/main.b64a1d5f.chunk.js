(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,i){e.exports=i(29)},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);var h=i(0),n=i.n(h),a=i(17),r=i.n(a),l=i(3),w=i(5),c=(i(28),i(1)),o=i(2),s=i(7),u=i(6),d=i(8),m=function(e){var t=e.grid,i=e.id,h=e.className;return n.a.createElement("div",{className:h},t.map(function(e,t){return n.a.createElement("p",{className:"grid",key:"".concat(i,"r").concat(t)},e.map(function(e,h){return n.a.createElement("b",{className:e,key:"".concat(i).concat(t).concat(h)})}))}))},v=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.savedCell,i=e.nextCell;return n.a.createElement("div",{className:"left-info"},n.a.createElement("div",{className:"next-cell"},n.a.createElement(m,{grid:i,id:"R"}),n.a.createElement("p",null,"Next")),n.a.createElement("div",{className:"save-cell"},n.a.createElement("p",null,"Saved"),n.a.createElement(m,{grid:t,id:"G"})))}}]),t}(n.a.Component),p=Object(l.b)(function(e){return{savedCell:e.savedCell,nextCell:e.nextCell}})(v),f=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameState,i=e.gameLevel,h=e.gameScore;return n.a.createElement("div",{className:"right-info"},n.a.createElement("div",null,""===t?"Appuyer sur Start":t),n.a.createElement("div",null,"Level: ",i),n.a.createElement("div",null,"Score: ",h))}}]),t}(n.a.Component),E=Object(l.b)(function(e){return{gameState:e.gameState,gameLevel:e.gameLevel,gameScore:e.gameScore}})(f),g=-1,y=null,b=function(e){var t=e.children,i=e.type,h=e.input,a=e.action,r=function(e){-1!==g&&(clearInterval(g),g=-1)},l=function(e,t){null===y&&(y=e.type),"single"===i?e.type===y&&a(t):"repeat"===i&&(document.addEventListener("mouseup",r),document.addEventListener("mouseout",r),document.addEventListener("touchleave",r),document.addEventListener("touchcancel",r),document.addEventListener("touchend",r),e.type===y&&a(t),-1===g&&(g=setInterval(function(){return a(t)},100)))};return n.a.createElement("span",{className:"video-game-button",onTouchStart:function(e){return l(e,h)},onMouseDown:function(e){return l(e,h)}},t)},S=i(10),k=10,C="green",A="blue",R="purple",G="yellow",O=[["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"],["white","white","white","white","white","white","white","white","white","white"]],T=function(){function e(){Object(c.a)(this,e),this.livingCell=!1,this.intScore=0,this.score=0,this.previousScore=0,this.level=1,this.grid=e.generateGrid([]),this.deadGrid=e.generateGrid([]),this.lost=!1}return Object(o.a)(e,[{key:"setScore",value:function(e){this.score+=e*this.level,this.intScore+=e,this.intScore>this.previousScore+50&&(this.level++,this.previousScore+=this.intScore-(this.previousScore+50)+50)}},{key:"setLost",value:function(){this.lost=!0}},{key:"wipeActiveGrid",value:function(){this.grid=this.deadGrid.map(function(e){return e.map(function(e){return e})})}},{key:"renderCelltoGrid",value:function(e){if(this.livingCell&&!this.lost){var t=e.cell,i=e.cellHeight,h=e.cellWidth,n=e.rowPos,a=e.colPos,r=e.isAlive;if(r){for(var l=this.deadGrid.map(function(e){return e.map(function(e){return e})}),w=i-1>n?n+1:i,c=0;c<w;c++)for(var o=a;o<a+h;o++)"white"!==t[i-1-c][o-a]&&(l[n-c][o]=t[i-1-c][o-a]);this.grid=l}else r||(this.deadGrid=this.grid.map(function(e){return e.map(function(e){return e})}))}}},{key:"addCell",value:function(){this.livingCell||this.lost||(this.livingCell=!0)}},{key:"handleRowDestruction",value:function(){var t=this.grid.map(function(e){return e.map(function(e){return e})}),i=t.reduce(function(e,t,i){return t.filter(function(e,t,i){return i&&"white"!==e}).length===k&&(e=[].concat(Object(S.a)(e),[i])),e},[]);i.reverse(),this.setScore(i.length*i.length),i.forEach(function(e){return t.splice(e,1)}),t!==this.grid&&(this.grid=t),this.grid=e.generateGrid(this.grid).map(function(e){return e.map(function(e){return e})}),this.deadGrid=this.grid}}],[{key:"generateGrid",value:function(e){for(var t=[],i=e.length;i<20;i++){for(var h=[],n=0;n<k;n++)h=[].concat(Object(S.a)(h),["white"]);t=[].concat(Object(S.a)(t),[h])}return[].concat(Object(S.a)(t),Object(S.a)(e))}}]),e}(),N=[["white","white","white","white"],["white","white","white","white"],["white","white","white","white"],["white","white","white","white"]],L=[[C,C,"white","white"],[C,C,"white","white"],["white","white","white","white"],["white","white","white","white"]],j=[[A,"white","white","white"],[A,"white","white","white"],[A,"white","white","white"],[A,"white","white","white"]],P=[["white","orange","orange","white"],["orange","orange","white","white"],["white","white","white","white"],["white","white","white","white"]],_=[[R,R,"white","white"],["white",R,R,"white"],["white","white","white","white"],["white","white","white","white"]],D=[["white","cyan","white","white"],["cyan","cyan","cyan","white"],["white","white","white","white"],["white","white","white","white"]],M=[[G,"white","white","white"],[G,G,G,"white"],["white","white","white","white"],["white","white","white","white"]],H=[["white","white","red","white"],["red","red","red","white"],["white","white","white","white"],["white","white","white","white"]],W=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(c.a)(this,e),this.cell=null,this.isAlive=!0,this.cellHeight=0,this.cellWidth=0,this.rowPos=-1,this.randomCellSelection(),this.findCellSize(),this.colPos=Math.floor(Math.random()*(k-this.cellWidth+1)),t&&this.willCollide(t,this.rowPos+1,this.colPos)&&(this.cell=null)}return Object(o.a)(e,[{key:"moveLeft",value:function(e){this.willCollide(e,this.rowPos,this.colPos-1)||(this.prevCol=this.colPos,this.colPos--)}},{key:"moveRight",value:function(e){this.willCollide(e,this.rowPos,this.colPos+1)||(this.prevCol=this.colPos,this.colPos++)}},{key:"moveDown",value:function(e){this.willCollide(e.deadGrid,this.rowPos+1,this.colPos)?(this.isAlive=!1,this.rowPos<this.cellHeight-1&&e.setLost()):(this.prevRow=this.rowPos,this.rowPos+=1)}},{key:"rotate",value:function(e){for(var t=[["white","white","white","white"],["white","white","white","white"],["white","white","white","white"],["white","white","white","white"]],i=this.cell.map(function(e){return e.map(function(e){return e})}),h=this.cellHeight;h>0;h--)for(var n=this.cellWidth;n>0;n--)t[this.cellWidth-n][this.cellHeight-h]=i[h-1][this.cellWidth-n];var a=this.cell.map(function(e){return e.map(function(e){return e})});this.cell=t.map(function(e){return e.map(function(e){return e})}),this.findCellSize(),this.willCollide(e,this.rowPos,this.colPos)&&(this.cell=a.map(function(e){return e.map(function(e){return e})}),this.findCellSize())}},{key:"willCollide",value:function(e,t,i){if(k-this.cellWidth<i||i<0||t>19)return!0;for(var h=this.cellHeight-1>t?t:this.cellHeight,n=0;n<h;n++)for(var a=0;a<this.cellWidth;a++)if("white"!==e[t-n][i+a]&&"white"!==this.cell[this.cellHeight-1-n][a])return!0;return!1}},{key:"findCellSize",value:function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)"white"!==this.cell[e][t]&&(this.cellHeight=e+1);for(var i=0;i<4;i++)for(var h=0;h<4;h++)"white"!==this.cell[h][i]&&(this.cellWidth=i+1)}},{key:"resetRow",value:function(){this.rowPos=-1}},{key:"randomCellSelection",value:function(){var t=null;do{t=Math.floor(Math.random()*Math.floor(7))}while(t===e.previousCell);switch(e.previousCell=t,t){case 0:this.cell=L;break;case 1:this.cell=j;break;case 2:this.cell=P;break;case 3:this.cell=_;break;case 4:this.cell=D;break;case 5:this.cell=M;break;case 6:this.cell=H}}}]),e}();W.previousCell=null;var F=W,x=function(e){return{type:"REFRESH_NEXT_CELL",payload:e}},q=new T,z=new F,I=new F,V={cell:N},J=!1,U=!1,X=!1;q.addCell();var Q=-1,Z=null;function B(e){"a"!==e.key&&"z"!==e.key&&"q"!==e.key&&"s"!==e.key&&"d"!==e.key||(e.key!==Z&&K(),-1===Q&&(Z=e.key,"a"!==e.key&&"z"!==e.key?(ie(e.key),Q=setInterval(function(){return ie(e.key)},90)):(Z=e.key,ie(e.key),Q=0)))}function K(){-1!==Q&&(clearTimeout(Q),Q=-1)}var Y=0,$=function e(t){var i=q.level<10?120*q.level:100;if(z&&!X){var h=t;h-Y>1200-i&&(ie("DOWN"),Y=h),requestAnimationFrame(e)}},ee=function(){U?X&&te():(U=!0,ce.dispatch(x(I.cell)),ce.dispatch({type:"GAME_STARTED"}),document.onkeypress=B,document.onkeyup=K,requestAnimationFrame($))},te=function(){U&&(X?(X=!1,requestAnimationFrame($),ce.dispatch({type:"GAME_STARTED"})):(X=!0,ce.dispatch({type:"GAME_PAUSED"})))},ie=function(e){if(z.isAlive||(z=I,I=new F(q.deadGrid),ce.dispatch(x(I.cell))),z&&U&&!X&&!q.lost)switch(e){case"a":if(J){var t=V;V=z,z=t,V.resetRow()}else q.wipeActiveGrid(),(V=z).resetRow(),z=I,I=new F,J=!0,ce.dispatch(x(I.cell));ce.dispatch({type:"REFRESH_SAVED_CELL",payload:V.cell});break;case"s":case"DOWN":z.moveDown(q);break;case"d":case"RIGHT":z.moveRight(q.deadGrid);break;case"q":case"LEFT":z.moveLeft(q.deadGrid);break;case"z":case"ROTATE":z.rotate(q.deadGrid)}q.renderCelltoGrid(z),z.isAlive||(q.handleRowDestruction(),ce.dispatch({type:"GAME_SCORE",payload:q.score}),ce.dispatch({type:"GAME_LEVEL",payload:q.level})),ce.dispatch({type:"REFRESH_GRID",payload:q.grid}),q.lost&&ce.dispatch({type:"GAME_LOST"})},he=ie,ne=function(){return n.a.createElement("div",{className:"controls-box"},n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"row"},n.a.createElement("span",{className:"start-btn",onClick:function(){return ee()}},"START"),n.a.createElement("span",{className:"start-btn",onClick:function(){return te()}},"PAUSE"),n.a.createElement("span",{className:"start-btn",onClick:function(){return q=new T,z=new F,I=new F,V={cell:N},J=!1,U=!1,X=!1,q.addCell(),void ce.dispatch({type:"GAME_RESTARTED"})}},"RESET")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"game-btn"},n.a.createElement(b,{type:"single",input:"a",action:he},"A"),"SAVE"),n.a.createElement("div",{className:"game-btn"},n.a.createElement(b,{type:"single",input:"ROTATE",action:he},"Z"),"ROTATE")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"game-btn"},n.a.createElement(b,{type:"repeat",input:"q",action:he},"Q"),"LEFT"),n.a.createElement("div",{className:"game-btn"},n.a.createElement(b,{type:"repeat",input:"d",action:he},"D"),"RIGHT")),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"game-btn"},n.a.createElement(b,{type:"repeat",input:"s",action:he},"S"),"DOWN"))))},ae=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.grid;return n.a.createElement(m,{className:"centeredgame",grid:e,id:"C"})}}]),t}(n.a.Component),re=Object(l.b)(function(e){return{grid:e.grid}})(ae),le=function(){return n.a.createElement("div",{className:"game"},n.a.createElement("div",{className:"game-box"},n.a.createElement("div",{className:"game-grid"},n.a.createElement(p,null),n.a.createElement(re,null),n.a.createElement(E,null)),n.a.createElement(ne,null)))},we=Object(w.b)({grid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH_GRID":return t.payload.map(function(e){return e.map(function(e){return e})});case"GAME_RESTARTED":return O;default:return e}},nextCell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH_NEXT_CELL":return t.payload.map(function(e){return e.map(function(e){return e})});case"GAME_RESTARTED":return N;default:return e}},savedCell:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REFRESH_SAVED_CELL":return t.payload.map(function(e){return e.map(function(e){return e})});case"GAME_RESTARTED":return N;default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"GAME_STARTED":return"Jeu en cours...";case"GAME_PAUSED":return"En pause.";case"GAME_LOST":return"Perdu !";case"GAME_RESTARTED":return"";default:return e}},gameLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_LEVEL":return t.payload;default:return e}},gameScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_SCORE":return t.payload;default:return e}}});i.d(t,"store",function(){return ce});var ce=Object(w.c)(we);r.a.render(n.a.createElement(l.a,{store:ce},n.a.createElement(le,null)),document.querySelector("#root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.b64a1d5f.chunk.js.map