(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,i){e.exports=i(243)},242:function(e,t,i){},243:function(e,t,i){"use strict";i.r(t);var l=i(0),n=i.n(l),r=i(25),c=i.n(r),a=i(20),o=i(22),h=i(107),s=i(43),u=i(44),w=10,d="green",f="blue",v="purple",m="yellow",g=function(){function e(){Object(s.a)(this,e),this.livingCell=!1,this.intScore=0,this.score=0,this.previousScore=0,this.level=1,this.grid=e.generateGrid([]),this.deadGrid=e.generateGrid([]),this.lost=!1}return Object(u.a)(e,[{key:"setScore",value:function(e){this.score+=e*this.level,this.intScore+=e,this.intScore>this.previousScore+50&&(this.level++,this.previousScore+=this.intScore-(this.previousScore+50)+50)}},{key:"setLost",value:function(){this.lost=!0}},{key:"wipeActiveGrid",value:function(){this.grid=this.deadGrid.map(function(e){return e.map(function(e){return e})})}},{key:"renderCelltoGrid",value:function(e){if(this.livingCell&&!this.lost){var t=e.cell,i=e.cellHeight,l=e.cellWidth,n=e.rowPos,r=e.colPos,c=e.isAlive;if(c){for(var a=this.deadGrid.map(function(e){return e.map(function(e){return e})}),o=i-1>n?n+1:i,h=0;h<o;h++)for(var s=r;s<r+l;s++)"white"!==t[i-1-h][s-r]&&(a[n-h][s]=t[i-1-h][s-r]);this.grid=a}else c||(this.deadGrid=this.grid.map(function(e){return e.map(function(e){return e})}))}}},{key:"addCell",value:function(){this.livingCell||this.lost||(this.livingCell=!0)}},{key:"handleRowDestruction",value:function(){var t=this.grid.map(function(e){return e.map(function(e){return e})}),i=t.reduce(function(e,t,i){return t.filter(function(e,t,i){return i&&"white"!==e}).length===w&&(e=[].concat(Object(a.a)(e),[i])),e},[]);i.reverse(),this.setScore(i.length*i.length),i.forEach(function(e){return t.splice(e,1)}),t!==this.grid&&(this.grid=t),this.grid=e.generateGrid(this.grid).map(function(e){return e.map(function(e){return e})}),this.deadGrid=this.grid}}],[{key:"generateGrid",value:function(e){for(var t=[],i=e.length;i<20;i++){for(var l=[],n=0;n<w;n++)l=[].concat(Object(a.a)(l),["white"]);t=[].concat(Object(a.a)(t),[l])}return[].concat(Object(a.a)(t),Object(a.a)(e))}}]),e}(),p=[["white","white","white","white"],["white","white","white","white"],["white","white","white","white"],["white","white","white","white"]],b=[[d,d,"white","white"],[d,d,"white","white"],["white","white","white","white"],["white","white","white","white"]],E=[[f,"white","white","white"],[f,"white","white","white"],[f,"white","white","white"],[f,"white","white","white"]],k=[["white","orange","orange","white"],["orange","orange","white","white"],["white","white","white","white"],["white","white","white","white"]],C=[[v,v,"white","white"],["white",v,v,"white"],["white","white","white","white"],["white","white","white","white"]],O=[["white","cyan","white","white"],["cyan","cyan","cyan","white"],["white","white","white","white"],["white","white","white","white"]],j=[[m,"white","white","white"],[m,m,m,"white"],["white","white","white","white"],["white","white","white","white"]],y=[["white","white","red","white"],["red","red","red","white"],["white","white","white","white"],["white","white","white","white"]],S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(s.a)(this,e),this.cell=null,this.isAlive=!0,this.cellHeight=0,this.cellWidth=0,this.rowPos=-1,this.randomCellSelection(),this.findCellSize(),this.colPos=Math.floor(Math.random()*(w-this.cellWidth+1)),t&&this.willCollide(t,this.rowPos+1,this.colPos)&&(this.cell=null)}return Object(u.a)(e,[{key:"moveLeft",value:function(e){this.willCollide(e,this.rowPos,this.colPos-1)||(this.prevCol=this.colPos,this.colPos--)}},{key:"moveRight",value:function(e){this.willCollide(e,this.rowPos,this.colPos+1)||(this.prevCol=this.colPos,this.colPos++)}},{key:"moveDown",value:function(e){this.willCollide(e.deadGrid,this.rowPos+1,this.colPos)?(this.isAlive=!1,this.rowPos<this.cellHeight-1&&e.setLost()):(this.prevRow=this.rowPos,this.rowPos+=1)}},{key:"rotate",value:function(e){for(var t=[["white","white","white","white"],["white","white","white","white"],["white","white","white","white"],["white","white","white","white"]],i=this.cell.map(function(e){return e.map(function(e){return e})}),l=this.cellHeight;l>0;l--)for(var n=this.cellWidth;n>0;n--)t[this.cellWidth-n][this.cellHeight-l]=i[l-1][this.cellWidth-n];var r=this.cell.map(function(e){return e.map(function(e){return e})});this.cell=t.map(function(e){return e.map(function(e){return e})}),this.findCellSize(),this.willCollide(e,this.rowPos,this.colPos)&&(this.cell=r.map(function(e){return e.map(function(e){return e})}),this.findCellSize())}},{key:"willCollide",value:function(e,t,i){if(w-this.cellWidth<i||i<0||t>19)return!0;for(var l=this.cellHeight-1>t?t:this.cellHeight,n=0;n<l;n++)for(var r=0;r<this.cellWidth;r++)if("white"!==e[t-n][i+r]&&"white"!==this.cell[this.cellHeight-1-n][r])return!0;return!1}},{key:"findCellSize",value:function(){for(var e=0;e<4;e++)for(var t=0;t<4;t++)"white"!==this.cell[e][t]&&(this.cellHeight=e+1);for(var i=0;i<4;i++)for(var l=0;l<4;l++)"white"!==this.cell[l][i]&&(this.cellWidth=i+1)}},{key:"resetRow",value:function(){this.rowPos=-1}},{key:"randomCellSelection",value:function(){var t=null;do{t=Math.floor(Math.random()*Math.floor(7))}while(t===e.previousCell);switch(e.previousCell=t,t){case 0:this.cell=b;break;case 1:this.cell=E;break;case 2:this.cell=k;break;case 3:this.cell=C;break;case 4:this.cell=O;break;case 5:this.cell=j;break;case 6:this.cell=y}}}]),e}();S.previousCell=null;var P=S,G=new g,N=new P,R=new P,A={cell:p},W=!1,H=!1;G.addCell();var z=0;function D(e){var t=G.level<10?120*G.level:100;if(N){var i=e;i-z>1200-t&&(T("DOWN"),z=i),requestAnimationFrame(D)}}function T(e){if(N.isAlive||(N=R,R=new P(G.deadGrid)),N&&H)switch(e){case"a":if(W){var t=A;A=N,N=t,A.resetRow()}else G.wipeActiveGrid(),(A=N).resetRow(),N=new P(G.deadGrid),W=!0;break;case"s":case"DOWN":N.moveDown(G);break;case"d":case"RIGHT":N.moveRight(G.deadGrid);break;case"q":case"LEFT":N.moveLeft(G.deadGrid);break;case"z":case"ROTATE":N.rotate(G.deadGrid)}return G.renderCelltoGrid(N),N.isAlive||G.handleRowDestruction(),Object(h.a)({},G,R,{savedCell:A})}var L=i(247),M=(i(121),function(){var e=Object(l.useState)(Object(a.a)(T().grid)),t=Object(o.a)(e,2),i=t[0],r=t[1],c=Object(l.useState)(T().lost),h=Object(o.a)(c,2),s=h[0],u=h[1],w=Object(l.useState)(T().score),d=Object(o.a)(w,2),f=d[0],v=d[1],m=Object(l.useState)(T().level),g=Object(o.a)(m,2),p=g[0],b=g[1],E=Object(l.useState)(T().cell),k=Object(o.a)(E,2),C=k[0],O=k[1],j=Object(l.useState)(T().savedCell.cell),y=Object(o.a)(j,2),S=y[0],P=y[1],G=function(e){return T(e)};Object(l.useEffect)(function(){P(T().savedCell.cell)},[T().savedCell.cell]),Object(l.useEffect)(function(){O(T().cell)},[T().cell]),Object(l.useEffect)(function(){b(G().level)},[G().level]),Object(l.useEffect)(function(){r(G().grid)},[G().grid]),Object(l.useEffect)(function(){u(G().lost)},[G().lost]),Object(l.useEffect)(function(){v(G().score)},[G().score]);var N=function(e){G(e)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game",onKeyDown:function(e){G(e.key)}},n.a.createElement("div",{className:"game-grid"},n.a.createElement("div",{className:"left-info"},S.map(function(e,t){return n.a.createElement("p",null,e.map(function(e,t){return n.a.createElement("b",{className:e})}))})),n.a.createElement("div",{className:"centeredgame"},i.map(function(e,t){return n.a.createElement("p",{key:"r".concat(t)},e.map(function(e,i){return n.a.createElement("b",{className:e,key:"".concat(t).concat(i)})}))})),n.a.createElement("div",{className:"right-info"},n.a.createElement("div",{className:"next-cell"},C.map(function(e){return n.a.createElement("p",null,e.map(function(e){return n.a.createElement("b",{className:e})}))}),n.a.createElement("br",null)),"Level : ",p,n.a.createElement("br",null),"Score : ",f,n.a.createElement("br",null),s?"PERDU":"En Cours...",n.a.createElement("br",null),n.a.createElement(L.a,{color:"teal",onClick:function(){return requestAnimationFrame(D),void(H=!0)}},"START GAME"))),n.a.createElement("div",{className:"controls"},n.a.createElement("div",{className:"ui centered grid"},n.a.createElement("div",{className:"two column column centered row"},n.a.createElement("div",{className:"column center aligned"},n.a.createElement(L.a,{circular:!0,inverted:!0,color:"orange",icon:"save outline",size:"massive",onClick:function(){return N("a")}})),n.a.createElement("div",{className:"column center aligned"},n.a.createElement(L.a,{circular:!0,inverted:!0,color:"purple",icon:"redo",size:"massive",onClick:function(){return N("ROTATE")}}))),n.a.createElement("div",{className:"two column column centered row"},n.a.createElement("div",{className:"column center aligned"},n.a.createElement(L.a,{circular:!0,inverted:!0,color:"teal",icon:"angle left",size:"massive",onClick:function(){return N("LEFT")}})),n.a.createElement("div",{className:"column center aligned"},n.a.createElement(L.a,{circular:!0,inverted:!0,color:"teal",icon:"angle right",size:"massive",onClick:function(){return N("RIGHT")}}))),n.a.createElement(L.a,{circular:!0,inverted:!0,color:"red",icon:"angle down",size:"massive",onMouseDown:function(){return N("DOWN")}})))))});i(242);c.a.render(n.a.createElement(M,null),document.querySelector("#root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.f6d59f90.chunk.js.map